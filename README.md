# Telegram-–±–æ—Ç –¥–ª—è –º–∞–≥–∞–∑–∏–Ω—É –∞–≤—Ç–æ–∑–∞–ø—á–∞—Å—Ç–∏–Ω

## üìå –û–ø–∏—Å
–¶–µ–π –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑—É—î —Ä–æ–±–æ—Ç—É –º–∞–≥–∞–∑–∏–Ω—É –∞–≤—Ç–æ–∑–∞–ø—á–∞—Å—Ç–∏–Ω —É Telegram: –æ–±—Ä–æ–±–∫—É –∑–∞–º–æ–≤–ª–µ–Ω—å, –≤–∑–∞—î–º–æ–¥—ñ—é –∑ –∫–ª—ñ—î–Ω—Ç–∞–º–∏, —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –±–æ–Ω—É—Å–∞–º–∏ —Ç–∞ –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—é –º–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤ —ñ–∑ –ø–æ–∫—É–ø—Ü—è–º–∏.  
–†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –Ω–∞ **python-telegram-bot** (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –≤–µ—Ä—Å—ñ—è) –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º **FastAPI** –¥–ª—è –æ–±—Ä–æ–±–∫–∏ webhook —ñ **PostgreSQL/Supabase** —è–∫ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö.

---

## ‚öôÔ∏è –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

### –î–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤
- –û—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω—å.
- –ü–µ—Ä–µ–≥–ª—è–¥ —ñ—Å—Ç–æ—Ä—ñ—ó –∑–∞–º–æ–≤–ª–µ–Ω—å.
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –±–æ–Ω—É—Å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å—É.
- –ê–∫—Ç–∏–≤–∞—Ü—ñ—è –±–æ–Ω—É—Å–Ω–∏—Ö –∫–æ–¥—ñ–≤.
- –û—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –¥–æ—Å—Ç–∞–≤–∫—É, –æ–ø–ª–∞—Ç—É, –º–∞–≥–∞–∑–∏–Ω.

### –î–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤
- –û—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –∑–∞–º–æ–≤–ª–µ–Ω—å —É –≥—Ä—É–ø—É.
- –í–∑—è—Ç—Ç—è –∫–ª—ñ—î–Ω—Ç–∞ –≤ –æ–±—Ä–æ–±–∫—É.
- –í—ñ–¥–ø–æ–≤—ñ–¥—ñ –∫–ª—ñ—î–Ω—Ç—É –≤ –æ—Å–æ–±–∏—Å—Ç–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è—Ö.
- –î–æ–¥–∞–≤–∞–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω—å —ñ–∑ —Ü—ñ–Ω–æ—é —Ç–∞ –æ–ø–∏—Å–æ–º.
- –ü–µ—Ä–µ–≥–ª—è–¥ —ñ –∑–º—ñ–Ω–∞ —Å—Ç–∞—Ç—É—Å—É –∑–∞–º–æ–≤–ª–µ–Ω—å.
- –ï–∫—Å–ø–æ—Ä—Ç –∑–∞–º–æ–≤–ª–µ–Ω—å —É —Ñ–æ—Ä–º–∞—Ç—ñ Excel.
- –ó–º—ñ–Ω–∞ –±–æ–Ω—É—Å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å—É –∫–ª—ñ—î–Ω—Ç—ñ–≤.

---

## üóÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É
main.py # –û—Å–Ω–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞ –±–æ—Ç–∞ —Ç–∞ webhook
db.py # –†–æ–±–æ—Ç–∞ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö (PostgreSQL/Supabase)
requirements.txt # –°–ø–∏—Å–æ–∫ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
.env.example # –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
README.md # –û–ø–∏—Å –ø—Ä–æ—î–∫—Ç—É


---

## üõ¢ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
–£ Supabase –∞–±–æ PostgreSQL –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–∫—ñ —Ç–∞–±–ª–∏—Ü—ñ:

### –¢–∞–±–ª–∏—Ü—è `orders`
| –ü–æ–ª–µ        | –¢–∏–ø       | –û–ø–∏—Å |
|-------------|-----------|------|
| id          | serial PK | ID –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è |
| user_id     | bigint    | ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ Telegram |
| description | text      | –û–ø–∏—Å –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è |
| price       | numeric   | –¶—ñ–Ω–∞ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è |
| status      | text      | –°—Ç–∞—Ç—É—Å –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è |
| created_at  | timestamp | –î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è |

### –¢–∞–±–ª–∏—Ü—è `bonuses`
| –ü–æ–ª–µ    | –¢–∏–ø       | –û–ø–∏—Å |
|---------|-----------|------|
| id      | serial PK | ID –∑–∞–ø–∏—Å—É |
| user_id | bigint    | ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ Telegram |
| balance | numeric   | –ë–æ–Ω—É—Å–Ω–∏–π –±–∞–ª–∞–Ω—Å |

### –¢–∞–±–ª–∏—Ü—è `messages`
| –ü–æ–ª–µ        | –¢–∏–ø       | –û–ø–∏—Å |
|-------------|-----------|------|
| id          | serial PK | ID –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è |
| user_id     | bigint    | ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ Telegram |
| message_text| text      | –¢–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è |
| created_at  | timestamp | –î–∞—Ç–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è |

---

## üìÇ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
–£ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ—î–∫—Ç—É —Å—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –∑–∞ –ø—Ä–∏–∫–ª–∞–¥–æ–º:

```env
BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
MANAGER_ID=ID_–º–µ–Ω–µ–¥–∂–µ—Ä–∞
MANAGER_GROUP_ID=ID_–≥—Ä—É–ø–∏_–º–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤
WEBHOOK_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω.com
WEBHOOK_SECRET_TOKEN=—Å–µ–∫—Ä–µ—Ç–Ω–∏–π_—Ç–æ–∫–µ–Ω
PORT=8000
DATABASE_URL=postgresql://user:password@host:port/dbname

üöÄ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è
1. –ö–ª–æ–Ω—É–≤–∞—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:
git clone https://github.com/Zapchasti69/store-telegram-bot.git
cd store-telegram-bot

2. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
pip install -r requirements.txt

3.–ó–∞–ø—É—Å–∫
–ß–µ—Ä–µ–∑ webhook (production):
uvicorn main:fastapi_app --host 0.0.0.0 --port 8000

–õ–æ–∫–∞–ª—å–Ω–æ (polling, –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è):
–£ main.py –∑–∞–º—ñ–Ω—ñ—Ç—å –∑–∞–ø—É—Å–∫ FastAPI –Ω–∞:
telegram_app.run_polling()

üì¶ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó
Python 3.10+
python-telegram-bot ‚Äî —Ä–æ–±–æ—Ç–∞ –∑ Telegram API
FastAPI ‚Äî –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –¥–ª—è webhook
PostgreSQL / Supabase ‚Äî –±–∞–∑–∞ –¥–∞–Ω–∏—Ö
asyncpg ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π –¥—Ä–∞–π–≤–µ—Ä PostgreSQL
pandas —Ç–∞ openpyxl ‚Äî –µ–∫—Å–ø–æ—Ä—Ç –∑–∞–º–æ–≤–ª–µ–Ω—å —É Excel
python-dotenv ‚Äî –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó

